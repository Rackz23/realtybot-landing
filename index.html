<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Apex Estate Solutions – Get Instant Demo</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --color-primary: #1f2937;
      --color-secondary: #4b5563;
      --color-accent: #2563eb;
      --color-cta: #ff6459;
      --color-bg: #f9fafb;
    }
    .hidden { display: none !important; }
    .countdown {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--color-cta);
    }
    .disclaimer {
      font-size: 0.875rem;
      color: var(--color-secondary);
      margin-top: 0.5rem;
    }
  </style>

  <!-- Facebook Pixel -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){
      n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)
    };if(!f._fbq) f._fbq=n; n.push=n; n.loaded=!0; n.version='2.0';
    n.queue=[]; t=b.createElement(e); t.async=!0; t.src=v;
    s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s)
    }(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init','1828085664422126');
    fbq('track','PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
     src="https://www.facebook.com/tr?id=1828085664422126&ev=PageView&noscript=1"/>
  </noscript>
</head>

<body class="bg-[var(--color-bg)] text-[var(--color-secondary)]">

  <!-- Header -->
  <header class="bg-white shadow">
    <div class="container mx-auto flex items-center justify-between py-4 px-6">
      <img src="assets/apex-logo.png" alt="Apex Estate Solutions" class="h-10"/>
    </div>
  </header>

  <!-- Hero & Form -->
  <section class="bg-white">
    <div class="container mx-auto text-center px-6 py-16">
      <h1 class="text-4xl md:text-5xl font-bold text-[var(--color-primary)] mb-4">
        Real Estate <span class="text-[var(--color-accent)]">Automation</span> &amp;
        <span class="text-[var(--color-cta)]">Marketing</span> Made Easy
      </h1>
      <p class="text-lg mb-6 max-w-xl mx-auto">
        Register now to unlock our 2-minute demo and see hot-lead capture in action.
      </p>

      <!-- Countdown Timer -->
      <div id="countdown" class="countdown mb-6">
        Demo Starts In: <span id="time">02:00:00</span>
      </div>

      <!-- Email Form -->
      <div id="formSection" class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-lg">
        <form id="leadForm" class="space-y-4">
          <input
            type="email"
            id="emailInput"
            placeholder="you@youremail.com"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg
                   focus:outline-none focus:ring-2 focus:ring-[var(--color-accent)]"
          />
          <button
            type="submit"
            class="w-full bg-[var(--color-cta)] text-white font-semibold py-3
                   rounded-lg hover:bg-opacity-90 transition"
          >
            Register &amp; Watch Demo
          </button>
          <p id="formError" class="text-red-500 text-sm hidden">
            Please enter a valid email.
          </p>
          <p class="disclaimer">
            We respect your privacy—your email will never be sold or shared.
          </p>
        </form>
      </div>
    </div>
  </section>

  <!-- Scripts -->
  <script>
    // Countdown (2 hours)
    let remaining = 2 * 3600;
    const timeEl = document.getElementById('time');
    setInterval(() => {
      const h = Math.floor(remaining/3600),
            m = Math.floor((remaining%3600)/60),
            s = remaining%60;
      timeEl.textContent = 
        `${String(h).padStart(2,'0')}:` +
        `${String(m).padStart(2,'0')}:` +
        `${String(s).padStart(2,'0')}`;
      remaining = remaining>0 ? remaining-1 : 0;
    }, 1000);

    // Mailchimp JSONP + redirect to demo.html
    document.getElementById('leadForm').addEventListener('submit', e => {
      e.preventDefault();
      const email = document.getElementById('emailInput').value.trim();
      if (!email) {
        document.getElementById('formError').classList.remove('hidden');
        return;
      }
      const dc='us5', u='f2ebf5b6d3307d2eb64af59c1', id='091391f2ec';
      const cb = 'cb'+Date.now();
      window[cb] = data => {
        document.body.removeChild(script);
        delete window[cb];
        // Always redirect, even on failure:
        window.location.href = `demo.html?email=${encodeURIComponent(email)}`;
      };
      const script = document.createElement('script');
      script.src = 
        `https://${dc}.list-manage.com/subscribe/post-json`+
        `?u=${u}&id=${id}&EMAIL=${encodeURIComponent(email)}`+
        `&c=${cb}`;
      document.body.appendChild(script);
    });
  </script>
</body>
</html>
